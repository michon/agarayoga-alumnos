
<% @clasesHoy.each do |cl| %>
    <div class="pb-4 mb-3 card">
        <div class="card-header"> 
            <h5 class="card-title"><%= " #{I18n.t('date.day_names')[cl.diaHora.strftime('%w').to_i].upcase}  #{cl.diaHora.strftime('%d')} #{I18n.t('date.abbr_month_names')[cl.diaHora.strftime('%m').to_i].upcase} #{cl.diaHora.strftime('%H:%M')}" %> </h5>
        </div> 

        <%= form_tag(clase_estado_path, method: :post) do %>
            <div class="card-body">
                <% cl.claseAlumno.each do |clalm| %>
                  <div class="form-check">
                    <input id="<%=clalm.id%>" name="alumnos_ids[]" type="checkbox" class="form-check-input" value="<%=clalm.id%>" > 
                    <label class="form-check-label <%=clalm.claseAlumnoEstado.color%>"  for="<%=clalm.id%>" > <%= clalm.usuario.nombre %> </label>
                  </div>
                <%end %>
            </div>

            <div class="card-footer"> 
              <div class="pb-4 row">
                  <div class="col col-9">
                      <div class="row">
                        <div class="col col-6">
                            <div class="form-check form-check-inline" >
                              <input class="form-check-input" type="radio" id="falto-<%=cl.id%>", name="accion#<%=cl.id%>" checked value="4">
                              <label class="form-check-label" for="falto-<%=cl.id%>"> Faltó </label>
                            </div>

                            <div class="form-check form-check-inline" >
                              <input class="form-check-input" type="radio" id="aviso-<%=cl.id%>", name="accion#<%=cl.id%>" value="3">
                              <label class="form-check-label" for="aviso-<%=cl.id%>"> Avisó </label>
                            </div>
                        </div>

                        <div class="col col-6">
                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" id="asistio-<%=cl.id%>", name="accion#<%=cl.id%>" value="2">
                              <label class="form-check-label" for="asistio-<%=cl.id%>"> Asistió </label>
                            </div>

                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" id="vendra-<%=cl.id%>", name="accion#<%=cl.id%>" value="1">
                              <label class="form-check-label" for="vendra-<%=cl.id%>"> Vendrá </label>
                            </div>
                        </div>
                      </div>
                  </div>

                  <div class="col col-3">
                    <button type="submit" class="btn btn-primary">Haz</button>
                  </div>
              </div>
              <div class="row justify-content-center">
                  <div class="col col-4">
                      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#altaAlumno-<%=cl.id%>">
                      +Alumno
                    </button>
                  </div>
                  <div class="col col-4">
                     <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#altaPrueba-<%=cl.id%>">
                      +Prueba
                    </button>
                  </div>
                  <div class="col col-4">
                     <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#quitar-<%=cl.id%>">
                      Quitar
                    </button>
                  </div>
              </div>
            </div>
              
        <%end %>
    </div>
<% end %>

<!-- formularios Modales para altas Alumnos-->
<% @clasesHoy.each do |cl| %>
    <div class="modal fade" id="altaAlumno-<%=cl.id%>" tabindex="-1" aria-labelledby="ModalAltaAlumnos" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="altaAlumno-<%=cl.id%>">
            <%= " #{I18n.t('date.day_names')[cl.diaHora.strftime('%w').to_i].upcase}  #{cl.diaHora.strftime('%d')} #{I18n.t('date.abbr_month_names')[cl.diaHora.strftime('%m').to_i].upcase} #{cl.diaHora.strftime('%H:%M')}" %> </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <%= form_for(ClaseAlumno.new, url: clase_alta_alumno_path) do |f| %> 
              <div class="modal-body">
                      <%= f.collection_select :usuario_id, Usuario.where(debaja: false).order(:nombre), :id, :nombre, prompt: true %> </br>
                      <%= f.hidden_field :clase_id, value: cl.id %>
                      <%= f.hidden_field :claseAlumnoEstado_id, value: 1 %>
                      <input type="hidden" id="fecha_dia" name="fecha" value="<%=cl.diaHora.to_s%>" >
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn btn-primary" name="commit" value="Añadir Alumno"> Añadir Alumno </button>
              </div>
          <% end %>    
        </div>
      </div>
    </div>
<%end%>

<!-- formularios Modales para altas Pruebas-->
<% @clasesHoy.each do |cl| %>
    <div class="modal fade" id="altaPrueba-<%=cl.id%>" tabindex="-1" aria-labelledby="ModalAltaAlumnos" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="altaPrueba-<%=cl.id%>">
            <%= " #{I18n.t('date.day_names')[cl.diaHora.strftime('%w').to_i].upcase}  #{cl.diaHora.strftime('%d')} #{I18n.t('date.abbr_month_names')[cl.diaHora.strftime('%m').to_i].upcase} #{cl.diaHora.strftime('%H:%M')}" %> </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <select class="form-select" ata-live-search="true">
                <% @alumnosActivos.each do |alm|%>
                    <option> <%=alm.nombre%> </option>
                <%end%>
            </select>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary">Añadir Alumno</button>
          </div>
        </div>
      </div>
    </div>
<%end%>

<!-- formularios Modales para quitar alumnos-->
<% @clasesHoy.each do |cl| %>
    <div class="modal fade" id="quitar-<%=cl.id%>" tabindex="-1" aria-labelledby="ModalAltaAlumnos" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="quitar-<%=cl.id%>">
            <%= " #{I18n.t('date.day_names')[cl.diaHora.strftime('%w').to_i].upcase}  #{cl.diaHora.strftime('%d')} #{I18n.t('date.abbr_month_names')[cl.diaHora.strftime('%m').to_i].upcase} #{cl.diaHora.strftime('%H:%M')}" %> </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <%= form_tag(clase_baja_alumnos_path, method: :post) do %>
              <div class="modal-body">
                  <select class="form-select"  name="clase_alumno_id" id="baja_clase_alumno_id">
                      <% cl.claseAlumno.each do |clAlm|%>
                          <option value="<%=clAlm.id%>"> <%=clAlm.usuario.nombre%> </option>
                      <% end %>
                  </select>
                  <input type="hidden" id="baja_fecha_dia" name="fecha"    value="<%=cl.diaHora.to_s%>" >
              </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="submit" class="btn btn-primary" name="commit" value="Añadir Alumno"> Quitar Alumno </button>
          </div>
          <% end %>    
        </div>
      </div>
    </div>
<%end%>
